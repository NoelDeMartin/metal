#!/bin/bash

if [ -z "$METAL_HOME" ]
then
    echo "METAL_HOME env variable not set"
    exit
fi

COMMAND=$1

OPTIONS=`getopt --longoptions=debug --name "$0" -- "$@"`
eval set -- "$OPTIONS"
while true; do
    case "$1" in
        -d|--debug)
            export METAL_DEBUG=true
            shift
            ;;
        --)
            shift
            break
            ;;
        *)
            echo "Programming error"
            exit 3
            ;;
    esac
done

export PROJECT_PATH=`pwd`

if [ -e "$METAL_HOME/commands/$COMMAND.sh" ]
then
    bash "$METAL_HOME/commands/$COMMAND.sh"
else
    echo "Unknown command \"$COMMAND\""
fi
